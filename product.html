<!DOCTYPE HTML>
<!--
    Verti by HTML5 UP
    html5up.net | @ajlkn
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <!-- Dynamically populate title with JavaScript -->
    <title> {{title || 'Default Title'}} DiscountMatrix - Discover the Best Deals and Exciting Discounts</title>
    <meta name="description" content="buy discount {{title}} - Discount on Matrix is a platform that helps you find the best deals and exciting discounts on a wide range of products. Stay updated with the latest prices, promotions, and exclusive offers to save on your purchases.">
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="stylesheet" href="assets/css/main.css" />
</head>
<body class="is-preload homepage">
    <div id="page-wrapper">

        <!-- Header -->
        <div id="header-wrapper">
            <header id="header" class="container">
                <!-- Logo -->
                <div id="logo">
                    <h1><a href="index.html">discount</a></h1>
                    <span>matrix</span>
                </div>

                <!-- Nav -->
                <nav id="nav">
                    <ul>
                        <li class="current"><a href="/">Home</a></li>
                        <li><a href="/">about</a></li>
                        <li><a href="/">privacy policy</a></li>
                        <li><a href="/">Product policy</a></li>
                    </ul>
                </nav>
            </header>
        </div>

        <!-- Main -->
        <div id="main-wrapper">
            <div class="container">
                <div id="content">

                    <!-- Content -->
                    <article>
                        <style>
                            /* Your CSS goes here */
                        </style>

                        <div class="container" id="content">
                            <div class="breadcrumb">
                                <a href="/">Home</a> &gt; <span id="breadcrumb-title">Product Title</span>
                            </div>

                            <div class="product-section">
                                <div id="product-detail" class="product-detail"></div>
                            </div>

                            <div class="search-bar">
                                <input type="text" id="search-input" placeholder="Search for related products..." autocomplete="off" />
                                <button id="search-button">Search</button>
                            </div>

                            <div class="related-products-section">
                                <h2>Related Products</h2>
                                <div id="related-products-list" class="related-products"></div>
                                <div class="pagination">
                                    <button id="load-more">Load More</button>
                                </div>
                            </div>
                        </div>

                        <script type="application/ld+json" id="schema-markup">
                        {
                            "@context": "https://schema.org/",
                            "@type": "Product",
                            "name": "{{title}}",
                            "image": "{{imageUrl}}",
                            "description": "Don't Miss Out: {{title}} is available with {{discount}}. Buy more than 2 items and get an extra 10% discount and free shipping. Claim your products now!",
                            "brand": {
                                "@type": "Brand",
                                "name": "Best Diskon"
                            },
                            "offers": {
                                "@type": "Offer",
                                "priceCurrency": "USD",
                                "price": "{{discountPrice}}",
                                "itemCondition": "https://schema.org/NewCondition",
                                "availability": "https://schema.org/InStock",
                                "url": "/product.html?productId={{id}}"
                            }
                        }
                        </script>

                        <script>
                            const sheetId = '1dRJ72TYn9eBq-VK4sngnZqTCc-1eWNRBuhK6pMrSnt8';
                            const apiKey = 'AIzaSyCpmFiIHxwX6XhPbvZYTytfpiv_DcA1b2g';
                            const range = 'Sheet1';
                            const urlParams = new URLSearchParams(window.location.search);
                            const productId = urlParams.get('productId');

                            let relatedProducts = [];
                            let displayedProductsCount = 0;
                            const productsToShow = 6;

                            function fetchProductData() {
                                fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`)
                                    .then(response => response.json())
                                    .then(data => {
                                        const rows = data.values;
                                        const productData = rows.find(row => row[0] === productId);

                                        if (productData) {
                                            displayProduct(productData);
                                            fetchRelatedProducts(productData[8]);
                                        } else {
                                            console.error('Product not found for ID:', productId);
                                        }
                                    })
                                    .catch(error => console.error('Error fetching product data:', error));
                            }

                            function displayProduct(product) {
                                const productDetailHtml = `
                                    <img src="${product[1]}" alt="${product[2]}" style="height: 300px;">
                                    <div class="details">
                                        <h1>${product[2]}</h1>
                                        <p>Don't Miss Out: ${product[2]} is available with ${product[5]} off. Buy more than 2 items and get an extra 10% discount and free shipping. Claim your products now!</p>
                                        <div class="price">Price: USD ${product[4]} <span class="discount-price">($${product[3]})</span></div>
                                        <div class="discount">${product[5]} off</div>
                                        <center><a href="${product[6]}" class="buy-now">See Detail</a></center>
                                    </div>
                                `;
                                document.getElementById('product-detail').innerHTML = productDetailHtml;

                                // Update breadcrumb title
                                document.getElementById('breadcrumb-title').textContent = product[2];

                                // Update meta description and title
                                document.querySelector('meta[name="description"]').setAttribute('content', `${product[2]} - Discover amazing discounts on this product. Shop now and save!`);
                                document.title = `${product[2]} - Best Diskon Product`;
                            }

                            function fetchRelatedProducts(category) {
                                fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`)
                                    .then(response => response.json())
                                    .then(data => {
                                        relatedProducts = data.values.filter(row => row[8] === category && row[0] !== productId);
                                        displayRelatedProducts();
                                    })
                                    .catch(error => console.error('Error fetching related products:', error));
                            }

                            function displayRelatedProducts() {
                                const relatedProductsHtml = relatedProducts.slice(displayedProductsCount, displayedProductsCount + productsToShow)
                                    .map(product => `
                                        <div class="product-item">
                                            <a href="/product.html?productId=${product[0]}">
                                                <img src="${product[1]}" alt="${product[2]}">
                                            </a>
                                            <div class="price">USD ${product[4]} <span class="discount-price">($${product[3]})</span></div>
                                            <div class="discount">${product[5]} off</div>
                                            <p> <a href="/product.html?productId=${product[0]}">${product[2]}</a></p>
                                        </div>
                                    `).join('');

                                document.getElementById('related-products-list').innerHTML += relatedProductsHtml;

                                displayedProductsCount += productsToShow;

                                if (displayedProductsCount >= relatedProducts.length) {
                                    document.getElementById('load-more').style.display = 'none';
                                }
                            }

                            document.getElementById('search-button').addEventListener('click', function() {
                                const searchTerm = document.getElementById('search-input').value.toLowerCase();
                                const filteredProducts = relatedProducts.filter(product => product[2].toLowerCase().includes(searchTerm));
                                displayedProductsCount = 0; // Reset displayed count
                                document.getElementById('related-products-list').innerHTML = ''; // Clear previous results
                                if (filteredProducts.length > 0) {
                                    relatedProducts = filteredProducts; // Update relatedProducts to filtered results
                                    displayRelatedProducts();
                                } else {
                                    document.getElementById('related-products-list').innerHTML = '<p>No results found.</p>';
                                }
                            });

                            document.getElementById('load-more').addEventListener('click', displayRelatedProducts);
                            fetchProductData();
                        </script>
                    </article>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div id="footer-wrapper">
            <footer id="footer" class="container">
                <div class="row">
                    <div class="col-3 col-6-medium col-12-small">
                        <section class="widget links">
                            <ul class="style2"></ul>
                        </section>
                    </div>
                    <div class="col-3 col-6-medium col-12-small">
                        <section class="widget links">
                            <ul class="style2"></ul>
                        </section>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</body>
</html>
